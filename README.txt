Эмулятор сделок.
Нужен для подбора оптимальных параметров торговой стратегии. Работает на исторических данных. Принцип работы - по примеру оптимизатора в TsLab. Берется ваш торговый скрипт с сигналами, к ним применяется обработка - трейлинг-стоп, тейк-профит, и т.д. Позволяет обойти ограничения сервиса TradingView по расчету свечей. Обьем каждой сделки - 100.000 долл.

Как использовать:
1). Открыть нужный график на TradingView с торговым скриптом. Экспортировать данные в файл *.csv
https://ru.tradingview.com/support/solutions/43000537255/

2). Открыть этот файл в Excel. Оставить колонки time;open;high;low;close;Buy;Sell

3). Скопировать файл в папку с программой.

4). Запустить программу в терминале:
java -jar emulator.jar stop 0 10 1 in.csv out.csv.
В данном случае подбираем самые прибыльные варианты со стоп-лоссом от 0 до 10% с шагом 1%.

Можно указывать несколько параметров или некоторые из них оставить фиксированными, например:
java -jar emulator.jar stop 0 10 1 take-profit 2 in.csv out.csv.
В этом случае подбираем стоп от 0 до 10% с шагом 1%. и take-profit 2%, фиксированный

На выходе получаем:
out.csv - список сделок и прибыль/убыток по каждой в %
month.csv - статистика по месяцам

Если выбран подбор вариантов, используйте опцию save-last, к примеру:
save-last 5: 5 самых удачных вариантов будут сохранены в папку optimized.


==================================

Все доступные опции:

-stop 1.5 или -stop мин макс шаг
   уровень стоп-лосса, в процентах
   или -stop 1 5 0.5 - перебор вариантов от 1 до 5% с шагом 0.5%

-trailing-stop 3.0 или -trailing-stop мин макс шаг
   передвигать стоп в безубыток, например
   на каждые 3% движения цены - +0.15% от цены открытия или предыдущего стопа

-entry-filter 1.0 или -entry-filter мин макс шаг
   не открывать сделку, пока цена не сдвинется на 1% в нужную сторону

-entry-wait 3 или -entry-wait мин макс шаг
   ждать 3 свечи, пока цена не сдвинется в нужную сторону
   1 - свеча, на которой произошел вход в сделку

-commission-limit 0.01
   комиссия по лимитной сделке, в процентах

-commission-market 0.05
   комиссия по рыночной сделке, в процентах

-take-profit 3 или -take-profit мин макс шаг
   уровень прибыли в процентах, при котором сделка будет закрыта

-safe-stop 3 или -safe-stop мин макс шаг
   переместить стоп в безубыток, если цена выросла на 3%
   по типу -trailing-stop, но срабатывает один раз

-show-last 5
   если использовался перебор вариантов,
   вывести на экран 5 наиболее успешных

-save-last 3
   сохранить 3 наиболее успешных варианта
   в отдельную папку.

-part-profit 2
   частичный take-profit. Движение цены, в процентах.
   если цена сдвинулась на 2%, закрыть часть позиции

-part-fix 20
   частичный take-profit. Размер позиции, в процентах.
   если цена сдвинулась на +2%, зафиксировать прибыль в 20% от всей суммы
   
После нужной опции можно указать одно число (фикс. параметр)
или 3 числа - минимум, максимум и шаг
